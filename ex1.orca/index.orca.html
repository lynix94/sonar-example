
<html>
<head> <title> sonar example 1 - basic page </title> </head>
<body>

<div>
<h1>sonar example 1 - basic page</h1>
<pre>
This example shows basic html context exension module.
Orca support context extended object. which means that this index.orca.html file is made as orca object by html module.
object has html template in it and can make html text dynamically with request parameter and it's member objects.

below "hello, orca" is made by name member object. 
and embed_whale object embed it's result to html text on it's position.
</pre>
</div>

<div>
<div style="float:left; width:50%;">
using html;
using sonar;
using ex1;

<a href="/ex1?name=orca">about orca</a><br>
<a href="/ex1?name=humpback">about humpback whale</a><br>
<a href="/ex1?name=blue">about blue whale</a><br>

<h4>generated by object</h4>

hello, %{name}

def name(req)
{
	return req.get['name'];
}
<br>

<h4>object embedding</h4>
def embed_whale(req)
{
	switch req.get['name'] {
	case 'orca':
		return '<a href="https://en.wikipedia.org/wiki/Killer_whale">The killer whale or orca (Orcinus orca) is a toothed whale belonging to the oceanic dolphin family, of which it is the largest member.</a>';

	case 'humpback':
		return '<a href="https://en.wikipedia.org/wiki/Humpback_whale">The humpback whale (Megaptera novaeangliae) is a species of baleen whale. One of the larger rorqual species, adults range in length from 1216 m (3952 ft) and weigh around 2530 metric tons (2833 short tons).</a>';

	case 'blue':
		return '<a href="https://en.wikipedia.org/wiki/Blue_whale">The blue whale (Balaenoptera musculus) is a marine mammal belonging to the baleen whale parvorder, Mysticeti. At up to 29.9 metres (98 ft) in length and with a maximum recorded weight of 173 tonnes (190 short tons), it is the largest animal known to have ever existed.</a>';

	default:
		return '';
	}
}

<br><br><br><a href="/">back to main</a>
</div>

<div style="float:left; width:50%;">
<h3>code of this page</h3>
<pre>
def embed_code(req)
{
	code = os.read('ex1.orca/index.orca.html');
	code = html.escape(code);
	return code.replace('%', '&#37;');
}
</pre>
</div>
</div>

</body>
</html>


<!-- prepare object is called first, now this process default as orca -->
def prepare(req)
{
	print: req;
	if req.get.has_key('name') == false {
		req.get['name'] = 'orca';
	}
}


